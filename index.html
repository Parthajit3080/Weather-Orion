<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Weather Now</title>
<style>
  :root{
    --bg:#0b1020;
    --panel:#121933;
    --muted:#9fb0d3;
    --text:#eaf0ff;
    --accent:#5da8ff;
    --ok:#40d38a;
    --warn:#ffb657;
    --bad:#ff7070;
    --card:#0f1530;
    --br:18px;
    --shadow:0 10px 30px rgba(5,10,30,.35);
  }


  *{box-sizing:border-box}
  html,body{height:100%}
  
  
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    background: radial-gradient(1200px 600px at 80% -10%, #24335f 0%, transparent 60%) ,linear-gradient(160deg,#0a0f23 0%, #050813 100%);
    color:var(--text);
  }


  .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
  header{
    display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:18px
  }


  .brand{
    display:flex;gap:10px;align-items:center;font-size:20px;font-weight:700;letter-spacing:.3px
  }
  .brand .dot{width:10px;height:10px;background:var(--accent);border-radius:50%;box-shadow:0 0 20px var(--accent)}
  form{
    display:flex; gap:10px; width:100%; justify-content:flex-end;
  }
  input[type="text"]{
    flex:1;max-width:420px;padding:12px 14px;border-radius:12px;border:1px solid #273258;background:#0b1430;color:var(--text);
    outline:none; box-shadow: inset 0 0 0 1px transparent; transition:.2s;
  }
  input[type="text"]::placeholder{color:#8092b8}
  input[type="text"]:focus{border-color:#3b67d6; box-shadow: 0 0 0 4px rgba(59,103,214,.2)}
  
  
  button{
    padding:12px 16px;border-radius:12px;border:0;background:linear-gradient(180deg,#5da8ff,#4a86ff);
    color:white;font-weight:700;cursor:pointer; box-shadow:var(--shadow);
  }
  button[disabled]{opacity:.6;cursor:not-allowed}
  .grid{
    display:grid; gap:14px; grid-template-columns: repeat(12, 1fr);
  }



  .card{
    background:linear-gradient(180deg,#121a36,#0d142c);
    border:1px solid #233158; border-radius:var(--br); padding:16px; box-shadow: var(--shadow);
  }
  .card h3{margin:0 0 10px 0; font-size:16px; color:#bfd3ff; letter-spacing:.2px}
  .muted{color:var(--muted)}
  .big{
    display:flex;align-items:center;gap:16px
  }



  .temp{
    font-size:52px;font-weight:800;line-height:1
  }
  .units{font-size:14px;opacity:.9;margin-left:6px}
  .row{display:flex; gap:14px; flex-wrap:wrap}
  .pill{
    background:#0b1430;border:1px solid #223158;border-radius:999px;padding:6px 10px;font-size:13px;color:#cfe0ff
  }
  .kvs{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}
  .kv{background:#0b1430;border:1px solid #223158;border-radius:12px;padding:10px}
  .kv b{display:block;font-size:12px;color:#9fb0d3;margin-bottom:4px}
  .kv span{font-size:15px}
  .two-col{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
  .tbl{width:100%;border-collapse:collapse;font-size:14px}
  .tbl th,.tbl td{padding:8px 10px;border-bottom:1px solid #213055;text-align:left}
  .tbl th{color:#9fb0d3;font-weight:600}
  .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
  .center{display:flex;align-items:center;justify-content:center}
  .loading{padding:22px;text-align:center;color:#cfd9f9}
  .hide{display:none}
  /* responsive */
  @media (max-width:900px){
    .grid{grid-template-columns:repeat(6,1fr)}
  }
  @media (max-width:640px){
    form{flex-direction:column; align-items:stretch}
    button{width:100%}
    .temp{font-size:42px}
    .two-col{grid-template-columns:1fr}
  }
  .default-weather {
  margin-top: 40px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
  padding: 0 20px;
}
.weather-card {
  background: var(--card);
  border-radius: var(--br);
  padding: 16px;
  box-shadow: var(--shadow);
  text-align: center;
}
.weather-card img {
  width: 64px;
  height: 64px;
}
.weather-card h2 {
  margin: 10px 0 4px;
  font-size: 18px;
}
.weather-card p {
  margin: 4px 0;
  color: var(--muted);
  font-size: 14px;
}
.weather-card .temp {
  font-size: 28px;
  font-weight: bold;
  color: var(--accent);
}
    #results {
  margin-top: 40px; /* adds space between searched result and default cards */
}


  
</style>










</head>
<body>
  <div class="wrap">
   <header>
  <div class="brand"><span class="dot"></span> WEATHER ORION</div>
</header>

<div class="center-box">
  <form id="searchForm" autocomplete="off">
    <input id="query" type="text" placeholder="Enter location (e.g., London or 37.77,-122.42)" required />
    <button id="goBtn" type="submit">Get Weather</button>
  </form>
</div>


    <div id="status" class="card loading">Type a location and press “Get Weather”.</div>
    <div class="default-weather" id="defaultWeather"></div>

    <section id="results" class="grid hide">
        
      <!-- Left: current summary -->
      <div class="card" style="grid-column: span 7;">
        <h3 id="locTitle">Location</h3>
        <div class="big">
          <img id="icon" alt="icon" width="72" height="72" />
          <div>
            <div class="temp"><span id="tempC">--</span>°C <span class="units muted">/ <span id="tempF">--</span>°F</span></div>
            <div class="muted" id="condText">—</div>
          </div>
        </div>
        <div class="row" style="margin-top:12px">
          <span class="pill">Updated: <span id="updated">—</span></span>
          <span class="pill">Local time: <span id="localtime">—</span></span>
          <span class="pill">TZ: <span id="tz">—</span></span>
          <span id="dayflag" class="pill">—</span>
        </div>
      </div>

      <!-- Right: wind & pressure -->
      <div class="card" style="grid-column: span 5;">
        <h3>Wind & Pressure</h3>
        <div class="two-col">
          <div class="kvs">
            <div class="kv"><b>Wind</b><span><span id="windKph">--</span> kph (<span id="windMph">--</span> mph)</span></div>
            <div class="kv"><b>Direction</b>
              <span>
                <span id="windDir">—</span> (<span id="windDeg">--</span>°)
                <span title="arrow" style="display:inline-block; margin-left:6px; transform: rotate(0deg);" id="arrow">➤</span>
              </span>
            </div>
            <div class="kv"><b>Gust</b><span><span id="gustKph">--</span> kph (<span id="gustMph">--</span> mph)</span></div>
            <div class="kv"><b>Pressure</b><span><span id="pressMb">--</span> mb (<span id="pressIn">--</span> in)</span></div>
          </div>
          <div class="kvs">
            <div class="kv"><b>Visibility</b><span><span id="visKm">--</span> km (<span id="visMiles">--</span> mi)</span></div>
            <div class="kv"><b>Cloud</b><span><span id="cloud">--</span>%</span></div>
            <div class="kv"><b>UV Index</b><span id="uv" class="ok">--</span></div>
            <div class="kv"><b>Precipitation</b><span><span id="precipMm">--</span> mm (<span id="precipIn">--</span> in)</span></div>
          </div>
        </div>
      </div>

      





      <!-- Feels-like & thermal -->
      <div class="card" style="grid-column: span 6;">
        <h3>Thermal Comfort</h3>
        <div class="kvs">
          <div class="kv"><b>Feels Like</b><span><span id="feelsC">--</span>°C / <span id="feelsF">--</span>°F</span></div>
          <div class="kv"><b>Wind Chill</b><span><span id="chillC">--</span>°C / <span id="chillF">--</span>°F</span></div>
          <div class="kv"><b>Heat Index</b><span><span id="heatC">--</span>°C / <span id="heatF">--</span>°F</span></div>
          <div class="kv"><b>Dew Point</b><span><span id="dewC">--</span>°C / <span id="dewF">--</span>°F</span></div>
          <div class="kv"><b>Humidity</b><span id="humidity">--</span></div>
        </div>
      </div>

      <!-- Radiation -->
      <div class="card" style="grid-column: span 6;">
        <h3>Radiation (W/m²)</h3>
        <table class="tbl">
          <thead><tr><th>Shortwave</th><th>Diffuse</th><th>DNI</th><th>GTI</th></tr></thead>
          <tbody><tr>
            <td id="shortRad">--</td>
            <td id="diffRad">--</td>
            <td id="dni">--</td>
            <td id="gti">--</td>
          </tr></tbody>
        </table>
      </div>

      <!-- Air Quality -->
      <div class="card" style="grid-column: span 12;">
        <h3>Air Quality</h3>
        <div class="row" style="margin:4px 0 10px">
          <span class="pill">US EPA Index: <b id="epaIdx">—</b></span>
          <span class="pill">UK DEFRA Index: <b id="defraIdx">—</b></span>
        </div>
        <table class="tbl" id="aqTable">
          <thead>
            <tr>
              <th>CO</th><th>NO₂</th><th>O₃</th><th>SO₂</th><th>PM2.5</th><th>PM10</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="co">--</td>
              <td id="no2">--</td>
              <td id="o3">--</td>
              <td id="so2">--</td>
              <td id="pm25">--</td>
              <td id="pm10">--</td>
            </tr>
          </tbody>
        </table>
        <div class="muted" style="margin-top:8px">Units: CO/NO₂/O₃/SO₂ in μg/m³ (as provided), PM in μg/m³.</div>
      </div>
    </section>
  </div>











<script>
(() => {
  // Use HTTPS to avoid mixed-content issues
  const API_KEY = "4869fd8401974b08b4e170156250509";
  const BASE = "https://api.weatherapi.com/v1/current.json";

  const $ = (id) => document.getElementById(id);
  const statusEl = $("status");
  const results = $("results");
  const form = $("searchForm");
  const btn = $("goBtn");
  const query = $("query");

  function setText(id, val) { $(id).textContent = val ?? "—"; }
  function fmt(n, digits=1){ return (n===null || n===undefined || Number.isNaN(n)) ? "--" : Number(n).toFixed(digits); }

  function uvClass(v){
    if (v == null) return "";
    if (v < 3) return "ok";
    if (v < 6) return "warn";
    return "bad";
  }

  async function search(q){
    statusEl.classList.remove("hide");
    results.classList.add("hide");
    statusEl.textContent = "Loading…";
    btn.disabled = true;

    try{
      const url = `${BASE}?key=${API_KEY}&q=${encodeURIComponent(q)}&aqi=yes`;
      const res = await fetch(url, { cache: "no-store" });
      if(!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();
      render(data);
      statusEl.classList.add("hide");
      results.classList.remove("hide");
    }catch(err){
      console.error(err);
      statusEl.classList.remove("hide");
      statusEl.innerHTML = `<div class="loading">Couldn’t fetch weather. ${err.message}.<br/><span class="muted">Try a different place (e.g., "Paris", "90210", or "51.5,-0.1").</span></div>`;
    }finally{
      btn.disabled = false;
    }
  }

  function render(d){
    const loc = d.location || {};
    const c = d.current || {};
    const cond = (c.condition || {});

    // Header / summary
    const title = `${loc.name ?? ""}${loc.region ? ", " + loc.region : ""}${loc.country ? ", " + loc.country : ""}`;
    setText("locTitle", title);
    $("icon").src = cond.icon ? (cond.icon.startsWith("http") ? cond.icon : "https:" + cond.icon) : "";
    $("icon").alt = cond.text || "Condition";
    setText("tempC", fmt(c.temp_c, 1));
    setText("tempF", fmt(c.temp_f, 1));
    setText("condText", cond.text || "—");
    setText("updated", c.last_updated || "—");
    setText("localtime", loc.localtime || "—");
    setText("tz", loc.tz_id || "—");
    $("dayflag").textContent = c.is_day ? "Daytime" : "Night";
    $("dayflag").style.background = c.is_day ? "#123b2a" : "#231a3b";
    $("dayflag").style.borderColor = "#223158";

    // Wind & pressure
    setText("windKph", fmt(c.wind_kph, 1));
    setText("windMph", fmt(c.wind_mph, 1));
    setText("windDir", c.wind_dir || "—");
    setText("windDeg", fmt(c.wind_degree, 0));
    $("arrow").style.transform = `rotate(${(c.wind_degree||0)}deg)`;
    setText("gustKph", fmt(c.gust_kph, 1));
    setText("gustMph", fmt(c.gust_mph, 1));
    setText("pressMb", fmt(c.pressure_mb, 1));
    setText("pressIn", fmt(c.pressure_in, 2));
    setText("visKm", fmt(c.vis_km, 1));
    setText("visMiles", fmt(c.vis_miles, 1));
    setText("cloud", fmt(c.cloud, 0));
    const uv = c.uv;
    const uvEl = $("uv");
    uvEl.textContent = fmt(uv,1);
    uvEl.className = uvClass(uv);

    setText("precipMm", fmt(c.precip_mm, 1));
    setText("precipIn", fmt(c.precip_in, 2));

    // Thermal
    setText("feelsC", fmt(c.feelslike_c,1));
    setText("feelsF", fmt(c.feelslike_f,1));
    setText("chillC", fmt(c.windchill_c,1));
    setText("chillF", fmt(c.windchill_f,1));
    setText("heatC", fmt(c.heatindex_c,1));
    setText("heatF", fmt(c.heatindex_f,1));
    setText("dewC", fmt(c.dewpoint_c,1));
    setText("dewF", fmt(c.dewpoint_f,1));
    setText("humidity", (c.humidity!=null)? `${c.humidity}%` : "—");

    // Radiation
    setText("shortRad", fmt(c.short_rad,2));
    setText("diffRad", fmt(c.diff_rad,2));
    setText("dni", fmt(c.dni,2));
    setText("gti", fmt(c.gti,2));

    // Air quality
    const aq = c.air_quality || {};
    setText("epaIdx", aq["us-epa-index"] ?? "—");
    setText("defraIdx", aq["gb-defra-index"] ?? "—");
    setText("co", fmt(aq.co,1));
    setText("no2", fmt(aq.no2,2));
    setText("o3", fmt(aq.o3,1));
    setText("so2", fmt(aq.so2,2));
    setText("pm25", fmt(aq.pm2_5,3));
    setText("pm10", fmt(aq.pm10,3));
  }
    // Default weather cards
  const defaultCities = ["Kolkata", "New Delhi", "New York"];
  const defaultContainer = $("defaultWeather");

  async function fetchWeather(city) {
    const url = `${BASE}?key=${API_KEY}&q=${encodeURIComponent(city)}&aqi=yes`;
    const res = await fetch(url);
    return res.json();
  }

  async function loadDefaultWeather() {
    defaultContainer.innerHTML = "";
    for (let city of defaultCities) {
      try {
        const data = await fetchWeather(city);
        const c = data.current;
        defaultContainer.innerHTML += `
          <div class="weather-card">
            <img src="https:${c.condition.icon}" alt="${c.condition.text}">
            <h2>${data.location.name}</h2>
            <p>${data.location.country}</p>
            <div class="temp">${c.temp_c}°C</div>
            <p>${c.condition.text}</p>
            <p>Humidity: ${c.humidity}%</p>
            <p>Wind: ${c.wind_kph} kph</p>
          </div>
        `;
      } catch (err) {
        console.error("Error loading city:", city, err);
      }
    }
  }
  

  // Call immediately on page load
  loadDefaultWeather();

  // Demo: prefill with London on first load (optional)
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    search(query.value.trim());
  });
})();
</script>
</body>
</html>
